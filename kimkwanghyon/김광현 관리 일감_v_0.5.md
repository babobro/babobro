# 김광현 버전 관리 일감

[TOC]


### 기능 개발 리스트
* 상위 리그 추가
* 리그 편성 로직 수정
* 코치카드 필터링
* 코치카드 정보 노출
* 보물상자 일괄 개봉
* 보관함 페이징
* 재료카드 보관함 내 분리
* 뽑기 후 즉시 삭제 기능

### 기능별 진행 상황

| 기능명    |   기획	 	|	 디자인	| 	서버		| DB	   | 클라이언트 | 진행도  |
|:--------:|:---------:|:-----------:|:----------:|:--------:|:--------:|:------:|
|상위 리그 추가|90%|0%|0%|0%|0%|10%|
|리그 편성 로직 수정|90%|0%|0%|0%|0%|10%|
|코치카드 필터링|90%|0%|0%|0%|0%|10%|
|코치카드 정보 노출|90%|0%|0%|0%|0%|10%|
|보물상자 일괄 개봉|90%|0%|0%|0%|0%|10%|
|보관함 페이징|90%|0%|0%|0%|0%|10%|
|재료카드 보관함 내 분리|0%|0%|0%|0%|0%|10%|
|뽑기 후 즉시 삭제 기능|90%|0%|0%|0%|0%|10%|

*	*	*

#### ==상위 리그 추가==
* 기능 설명
	* 현재 최상위 리그인 야신 리그(league_no = 9) 명칭을 마스터 리그(가칭)(league_no = 9)로 변경
	* 명칭이 변경된 마스터 리그(league_no = 9)의 상위 리그를 추가
	* 추가된 상위 리그 명칭은 야신 리그(league_no = 10)로 칭함
* 도입 배경
	* 첼린저 리그(league_no = 8) 1위를 하여 야신 리그(league_no = 9)로 승격하여도 야신 리그(league_no = 9)의 유저간 격차가 커 게임이 일방적으로 진행되고 있어 해당 간극을 줄이고자 함
* 목표
	* 최상위 리그를 추가
	* 최상위 리그는 야신 리그(league_no = 10)로 칭함
	* 기존 야신 리그(league_no = 9)는 마스터 리그(가칭)(league_no = 9)으로 변경
	* 현 야신 리그(league_no = 9)에 묶여 있는 미션을 추가된 야신 리그(league_no = 10)에 적용되도록 변경
	* 관련 디자인 리소스 제작 및 변경
	* 인 게임 도움말 및 안내 텍스트 변경
* 수행 방식
	* ** * 기존 야신 리그 = 마스터 리그, 추가된 상위 리그는 야신 리그로 칭함 * **
	* 1 ~ 9까지 존재하는 리그 정보에 10번 리그 추가
|league_no|league_name|
|:-------:|:---------:|
|1|비기너|
|2|2부|
|3|1부|
|4|마이너|
|5|메이저|
|6|챔피언|
|7|히어로|
|8|첼린저|
|** * 9 * **|** * 마스터 * **|
|** * 10 * **|** * 야신 * **|
	* leaguereward 테이블에 10번 리그 추가
|legue_no|legue_name|daily_cost1|daily_cost2|daily_cost3|daily_cost4|daily_cost5|daily_cost6|legue_grade|league_rank1|league_MVP|post_season_rank1|post_season_rank2|post_season_MVP|best_player_reward|penn_win|penn_draw|penn_lose|
|:-------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|:---------:|
|1|비기너|95|96|97|98|99|100|1|0|0|0|0|0|0|13000|6000|4000|
|2|2부|105|106|107|108|109|110|1|120000|50000|110000|55000|50000|50000|13000|6000|4000|
|3|1부|120|121|122|123|124|125|1|140000|50000|140000|70000|50000|50000|13000|6000|4000|
|4|마이너|130|131|132|133|134|135|1|160000|50000|170000|85000|50000|50000|13000|6000|4000|
|5|메이저|145|146|147|148|149|150|1|180000|50000|200000|100000|50000|50000|13000|6000|4000|
|6|챔피언|151|152|153|154|155|156|1|200000|50000|230000|115000|50000|50000|13000|6000|4000|
|7|히어로|157|158|159|160|161|162|1|220000|50000|260000|130000|50000|50000|13000|6000|4000|
|8|첼린저|163|164|165|166|167|168|1|240000|50000|290000|145000|50000|50000|20000|10000|6000|
|9|마스터|169|170|171|172|173|174|1|500000|50000|500000|150000|50000|50000|25000|10000|8000|
|10|야신|184|185|186|187|188|189|1|1000000|100000|1000000|500000|100000|100000|50000|25000|16000|
			* 야신 리그 데일리 코스트는 변경 될 수 있음
	* gamemissioninfo 테이블에 야신리그 관련 정보 수정
		* 야신 관련 미션은 현재 9번 리그 연승 및 우승 카운트를 받도록 하드코딩 되어 있어 해당 미션 클리어 조건을 10번 리그에서 20연승과 우승 시 카운트를 누적시키는 형태로 변경이 필요
		* 야신리그 20연승 미션
		* 야신리그 한국 시리즈 3연속 우승 미션
	* 8 -> 9 리그 종료 시 8 리그의 우승자 1명만 승격되는 것을 상위 3명이 9리그로 승격되도록 변경
	* 9 -> 10 리그 종료 시 9 리그의 우승자 1명만 10리그로 승격되도록 변경
	* 길드 배틀 점수 집계 방식 변경
		* 1 라운드
			* 페넌트레이스 결기당 승리시 획득 포인트
			|조건|획득 포인트|
			|:--:|:-------:|
			|승리 시|30|
			|패배 시|20|
			* 각 리그별 페넌트레이스 경기 승리 시 가산점
			|리그명|변경 전|변경 후|
			|:-:|:--:|:-------:|
			|** * 야신 * **|-|** * 40 * **|
			|** * 마스터(기존 야신) * **|** * 40 * **|** * 32 * **|
			|첼린저|23|23|
			|히어로|17|17|
			|챔피언|14|14|
			|메이저|7|7|
			|마이너|3|3|
			|1부|0|0|
			|2부|0|0|
			* 각 리그별 페넌트레이스 경기 무승부 시 가산점
			|리그명|변경 전|변경 후|
			|:-:|:--:|:-------:|
			|** * 야신 * **|-|** * 30 * **|
			|** * 마스터(기존 야신) * **|** * 30 * **|** * 21 * **|
			|첼린저|14|14|
			|히어로|10|10|
			|챔피언|6|6|
			|메이저|2|2|
			|마이너|1|1|
			|1부|0|0|
			|2부|0|0|
			* 각 리그별 페넌 트레이스 우승 시 가산점
			|리그명|변경 전|변경 후|
			|:-:|:--:|:-------:|
			|** * 야신 * **|-|** * 100 * **|
			|** * 마스터(기존 야신) * **|** * 100 * **|** * 75 * **|
			|** * 첼린저 * **|** * 70 * **|** * 65 * **|
			|히어로|50|50|
			|챔피언|40|40|
			|메이저|30|30|
			|마이너|20|20|
			|1부|0|0|
			|2부|0|0|
			*각 리그별 승, 무, 패와 관계 없이 경기 진행 시 받는 가산점
			|리그명|변경 전|변경 후|
			|:-:|:--:|:-------:|
			|** * 야신 * **|-|** * 3 * **|
			|** * 마스터(기존 야신) * **|** * 3 * **|** * 1 * **|
			|첼린저|0|0|
			|히어로|0|0|
			|챔피언|0|0|
			|메이저|0|0|
			|마이너|0|0|
			|1부|0|0|
			|2부|0|0|
		* 2라운드
			* 포스트 시즌 순위별 획득 포인트(변경전)
			|순위|야신|마스터(기존 야신)|첼린저|히어로|챔피언|메이저|마이너|1부|2부|
			|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
			|우승|-|200|100|90|80|60|50|30|10|
			|준우승|-|150|90|80|50|40|30|20|0
			|3,4위|-|130|70|50|40|30|20|10|0|
			* 포스트 시즌 순위별 획득 포인트(변경후)
			|순위|** * 야신 * **|** * 마스터(기존 야신) * **|첼린저|히어로|챔피언|메이저|마이너|1부|2부|
			|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
			|우승|** * 200 * **|** * 150 * **|100|90|80|60|50|30|10|
			|준우승|** * 150 * **|** * 110 * **|90|80|50|40|30|20|0
			|3,4위|** * 130 * **|** * 100 * **|70|50|40|30|20|10|0|
		* 기타 조건 변경
			* 보상 테이블 변경 없음
			* 승점이 같은 길드가 두개 이상일 때, 야신 리그에 속해있는 구성원이 더 많은 길드가 최종 우승으로 결정
			*야신 리그에 속해 있는 구성원이 같을 경우, 마스터 리그에 속해 있는 구성원이 더 많은 길드가 최종 우승
	* 리그 정보 디자인 리소스 수정 필요
		* 별도 문서 참조
	* TIP 메뉴 내 리그 관련 정보 수정 필요
		* 별도 문서 참조

#### ==리그 편성 로직 수정==
* 기능 설명
	* 매주 새로운 리그 시작 전 유저별 리그 편성 로직을 통하여 각 리그에 배정되고 있으며 해당 로직에 대한 조건들을 추가하여 수정하고자 함
* 도입 배경
	* 같은 길드의 유저를 같은 리그에서 만나고 있는 유저 수가 매우 많아 길드 배틀 진행 시 소위 팀킬 현상이 발생
	* 동일 리그의 다양한 유저와 만날 수 있도록 하고자 함
* 목표
	* 동일 길드의 유저를 같은 리그에서 만날 경우의 수를 낮춤
	* 이전 주에 같은 리그에 편성되었던 유저 간에 만날 경우의 수를 낮춤
* 수행 방식
	* ** * 기존 야신 리그 = 마스터 리그, 추가된 상위 리그는 야신 리그로 칭함 * **
	* 1 ~ 9까지 존재하는 리그 정보에 10번 리그 추가
	* 리그 배치 관련 로직 수정
		* 리그에 배치될 유저를 리스트 화(유저들의 길드 정보 추가)
		* 아래와 같은 조건으로 리그를 구성
|league_list_no|user_no|guild_no|
|:------------:|:-----:|:------:|
|==1==|==201212240000000533==|==201405090000000067==|
|1|201212240000001123|201405090000000067|
|1|201212240000012533|201405090000000067|
|1|201212240000002533|201405090000000070|
|1|201212240000010533|201405090000000071|
|1|201212240000045533|201405090000000072|
|1|201212240000004533|201405090000000073|
|1|201212240000005533|201405090000000074|
|==2==|==201212250000034533==|==201405090000000075==|
|2|201212250000077533|201405090000000075|
|2|201212250000034533|201405090000000075|
|2|201212250000077533|201405090000000075|
|2|201212250000034533|201405090000000075|
|2|201212250000077533|201405090000000075|
|2|201212250000034533|201405090000000075|
|2|201212250000077533|201405090000000075|
|==3==|==201212250000034533==|==201405090000000075==|
|3|201212250000077533|201405090000000076|
.............................................................................................
|league_list_no|user_no|guild_no|
|:-------:|:------------:|:-----:|:------:|
|11|201312010000000533|201405090000000083|
|11|201312010000000533|201405090000000083|
|11|201312010000000533|201405090000000083|
|11|201312010000000533|201405090000000083|
|11|201312010000000533|-|
.............................................................................................
|league_list_no|user_no|guild_no|
|:-------:|:------------:|:-----:|:------:|
|20|201312010000000533|-|
|20|201312010000001123|-|


	* guild_no 를 기준으로 정렬
	* guild_no = null 인 유저는 배치열 뒷쪽에 정렬
	* 리그에 배치될 인원 파악
		* 리그 내 그룹 구성 수량 = (리그에 배치될 인원 + 7) / 8
			* 300명의 인원이 같은 리그에 배치될 경우 (200 + 7) / 8 = 25.XXX
			* 그룹 생성량 = 25
	* 사전에 해당 리그에 더미 그룹을 생성
	* 유저 배치시 현재의 좌에서 우로 순차적으로 그룹을 채워가는 형태가 아닌 상에서 하로 순차적으로 그룹을 채워나가는 형태로 수정
		* 1행 1열 -> 2행 1열 -> 3행 1열 -> 4행 1열 -> 5행 1열 -> 6행 1열 -> 6행 1열 -> 7행 1열 -> 8행 1열 -> ... -> 25행 1열 -> 1행 2열 -> 2행 2열 -> ...
	* 상기의 방법으로 진행할 경우 동일 길드의 유저를 만날 확률이 줄어들고 더미 계정은 한 그룹당 최대 1개의 더미 계정만 삽입되는 형태로 변경됨

#### ==코치카드 필터링==
* 기능 설명
	* 코치 카드 사용 시 원하는 스탯 상승을 시켜주는 코치카드를 찾기 위하여 소모되야하는 시간을 단축
* 도입 배경
	* 원하는 코치 카드 사용의 불편함을 호소
* 목표
	* 원하는 코치 카드 사용을 수월하게 하고자 함
* 수행 방식
	* 코치 카드 사용 탭에서 아래와 같은 정렬 방식을 추가
		* 공통 적용 : 축복 카드는 최상단, 일반 카드는 축복 카드 이후 노출
		* 등급 정렬
			* 투/야 공통 : 노멀, 레어, 스페셜, S레어, SS레어 서브 정렬 방식 추가
		* 포지션 정렬
			* 야수 : 테이블, 클린업, 하위, 전체 서브 정렬 방식 추가
			* 투수 : 선발, 불펜, 필승조/마무리, 전체 서브 정렬 방식 추가
		* 스탯 정렬
			* 야수 : 정확, 장타, 주력, 수비 서브 정렬 방식 추가
			* 투수 : 제구, 종속, 구질, 체력 서브 정렬 방식 추가
	* UI 변경 및 디자인 리소스 요청은 별도의 문서 참조

#### ==코치카드 정보 노출==
* 기능 설명
	* 코치 카드 획득 및 사용 시 기본 아이콘 위에 일부 정보를 노출시켜 현재의 코치 카드 선택 후 해당 카드의 스탯 확인 플로우를 없애고자 함
* 도입 배경
	* 코치 카드 획득 후 해당 카드 정보 확인이 불편한 점을 개선
* 목표
	* 코치 설정 탭에서 코치 카드의 능력을 바로 확인할 수 있게 함
* 수행 방식
	* 코치카드 좌상단에 3개의 on / off 이미지 표시
		* 좌상단 이미지의 1번째는 해당 코치카드가 테이블/선발 적용일 경우 on 이미지가 표시
		* 좌상단 이미지의 2번째는 해당 코치카드가 클린업/불펜 적용일 경우 on 이미지가 표시
		* 좌상단 이미지의 3번째는 해당 코치카드가 하위/필승조/마무리 적용일 경우 on 이미지가 표시
		* 모든 포지션 공통 적용일 경우 1,2,3번 이미지 모두 on 이미지로 표시
	* 코치 카드 하단의 'XX코치카드' 텍스트 상단에 사각형 바 형태로 스탯에 상승 대한 정보 표시
		* 하단의 좌측 부터 정확, 장타, 주력, 수비 순 스텟 표시
		* 하단의 좌측 부터 제구, 종속, 구질, 체력 순 스텟 표시
	* UI 변경 및 디자인 리소스 요청은 별도의 문서 참조

#### ==보물상자 일괄 개봉==
* 기능 설명
	* 카카오 서버 보물 상자를 일괄 개봉하는 기능
* 도입 배경
	* 보물 상자 개봉시의 불편함 개선
* 목표
	* 원 버튼 클릭으로 보유 중인 모든 보물 상자를 일괄 개봉
	* 개봉된 상자의 내용은 모두 개봉 후 화면에 표시
* 수행 방식
	* 모두 받기 버튼 하단에 상자 일괄 개봉 버튼 추가
	* 버튼 클릭 시 선물함 내 보물상자가 모두 개봉
	* 개봉 종료 후 보물상자 개봉을 통해 획득한 아이템 리스트를 노출
		* 3000000 볼 X 00
		* KBO 포텐셜 프리미엄 카드 X 00
		* 5000 볼 X 00
		* 10000 볼 X 00
		* 100000 볼 X 00
		* 코치 카드 X 00
		* 스테미나 회복 X 00
		* 전체 강화잼 X 00
		* KBO 프리미엄 카드 X 00
		* KBO 연도 프리미엄 카드 X 00
	* UI 변경 및 디자인 리소스 요청은 별도의 문서 참조

#### ==보관함 페이징==
* 기능 설명
	* 아이템 보관함 진입 시 각 상품군에 따라 바로 구분
* 도입 배경
	* 보관함 내 표시 가능한 아이템 상품의 최대수량은 2000, 선물함 내 표시 가능한 아이템 상품의 최대 수량은 500이지만 해당 수량 이상 보유한 유저가 다수 있어 과거에 획득한 아이템 상품은 노출이 되지 않는 현상을 해결하고자 함
	* 해당 기능을 통해 원하는 상품에 대한 접근이 좀 더 쉽도록 하고자 함
	* 선물함의 경우 모두 받기(기존 적용) 및 보물상자 일괄 개봉(신규 개발 진행)을 통하여 최대 수량 이상이 있어도 개봉에 무리가 없으리라는 판단하에 아이템 보관함만 적용하도록 함
* 목표
	* 상품 군별 구분
		* 카드 상품
		* 강화잼
		* 재료 클론
		* 코치 카드
		* 부가 상품
	* 상품 군별 최대 2000개의 아이템 노출(수량 기준)
* 수행 방식
	* 최초 아이템 보관함 진입 시 보유 중인 카드 쿠폰 수량 정보 조회(최신순으로 2000개의 아이템을 클라이언트에 전달)
		* 최초 진입시 아이템 보관함은 카드 상품 탭에 고정됨
	* 상단 탭을 슬라이드 하여 상품 군별 이동 가능
	* 탭 별 노출 기준 리스트
		* 카드 상품
			* 10000번대 상품 모두 포함
			* 50001번 이상 50100번 미만 상품 모두 포함
			* 59001번 ~ 59323번 상품 모두 포함
			* 61001번 상품 포함
			* 90000번대 상품 모두 포함
		* 강화잼
			* 20000번대 상품 모두 포함
			* 30000번대 상품 모두 포함
		  	* 61002번 상품 포함
		* 재료 클론
			* 51000번 이상 53000번 미만 상품 모두 포함
			* 59324번 ~ 59326번 상품 모두 포함
		* 코치 카드
			* 80000번대 상품 모두 포함
		* 부가 상품
			* 40000번대 상품 모두 포함
			* 60001번 ~ 60003번 상품 모두 포함
			* 70000번대 상품 모두 포함
	* UI 변경 및 디자인 리소스 요청은 별도의 문서 참조

#### ==뽑기 후 즉시 삭제 기능==
* 기능 설명
	* 상점 및 보관함에서 선수 카드 뽑기 또는 기타 카드류 뽑기 후 즉시 삭제가 가능하도록 하는 기능
* 도입 배경
	* 유저 편의 기능 향상을 위하여 도입
* 목표
	* 상점 내 아래와 같은 상품 개봉 시 1장 개봉 후 즉시 삭제 가능
		* KBO 구단 - 노멀(product_item_no = 90001)
		* KBO 구단 - 스페셜(product_item_no = 90002)
		* KBO 연도 - 노멀(product_item_no = 90101)
		* KBO 연도 - 스페셜(product_item_no = 90102)
		* KBO 포텐셜 구단 - 노멀(product_item_no = 90201)
		* KBO 포텐셜 구단 - 스페셜(product_item_no = 90202)
		* KBO 포텐셜 연도 - 노멀(product_item_no = 90301)
		* KBO 포텐셜 연도 - 스페셜(product_item_no = 90302)
		* 코치 카드(product_item_no = 80001)
		* 코치 카드(10장)(product_item_no = 80003)
		* 코치 카드(30장)(product_item_no = 80004)
		* 코치 카드(50장)(product_item_no = 80005)
		* KBO 프리미엄(product_item_no = 90003)
		* KBO 연도 프리미엄(product_item_no = 90103)
		* KBO 포텐셜 프리미엄(product_item_no = 90203
		* 와일드 카드 - 2000년대(product_item_no = 90401)
		* 와일드 카드 - 90년대(product_item_no = 90402)
	* 보관함 내 상품 개봉시 상기 리스트와 동일한 상품군은 개봉 후 해당 화면에서 즉시 삭제 가능
* 수행 방식
	* 뽑기 상품군은 상품 뽑기 후 연속 뽑기 버튼과 삭제 버튼이 같은 화면에서 노출되도록 함
	* 쿠폰 상품류(보관함 내 한꺼번에 개봉되는 상품류)는 개봉 후 작은 카드 이미지는 누른 후 삭제가 가능하도록 함
	* UI 변경 및 디자인 리소스 요청은 별도의 문서 참조

#### ==재료카드 보관함 내 분리==
* 기능 설명